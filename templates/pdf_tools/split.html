{% extends 'base.html' %}

{% block title %}FileMaster - Diviser un PDF{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="fade-in-element" style="opacity: 0;">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">Diviser un PDF</h1>
        <p class="text-gray-600 mb-8">Séparez un fichier PDF en plusieurs documents distincts</p>
    </div>
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Main form section -->
        <div class="lg:col-span-2">
            <div class="bg-white rounded-lg shadow-md p-6 fade-in-element" style="opacity: 0;">
                <form method="post" enctype="multipart/form-data" class="space-y-6" id="splitForm">
                    {% csrf_token %}
                    
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors duration-300" id="dropZone">
                        <i class="fas fa-file-pdf text-red-500 text-5xl mb-4"></i>
                        <p class="text-gray-700 font-semibold mb-2">Glissez-déposez votre fichier PDF ici</p>
                        <p class="text-gray-500 mb-4">ou</p>
                        <label for="pdf_file" class="btn-hover inline-block bg-blue-600 text-white px-6 py-3 rounded-lg cursor-pointer hover:bg-blue-700 transition-colors duration-300">
                            <i class="fas fa-upload mr-2"></i>Choisir un fichier
                        </label>
                        <input type="file" id="pdf_file" name="pdf_file" accept=".pdf" class="hidden" required>
                        <p class="text-sm text-gray-500 mt-4">Taille maximale: 50 MB</p>
                    </div>
                    
                    <div id="fileInfo" class="hidden bg-gray-50 rounded-lg p-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <i class="fas fa-file-pdf text-red-500 text-2xl mr-3"></i>
                                <span id="fileName" class="text-gray-700 font-medium"></span>
                            </div>
                            <button type="button" id="removeFile" class="text-red-500 hover:text-red-700">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-gray-800">Options de division</h3>
                        
                        <div class="space-y-3">
                            <label class="flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors duration-300">
                                <input type="radio" name="split_mode" value="pages" checked class="mr-3">
                                <div>
                                    <p class="font-medium text-gray-800">Par plages de pages</p>
                                    <p class="text-sm text-gray-500">Ex: 1-3, 4-6, 7-10</p>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors duration-300">
                                <input type="radio" name="split_mode" value="fixed" class="mr-3">
                                <div>
                                    <p class="font-medium text-gray-800">Nombre de pages fixe</p>
                                    <p class="text-sm text-gray-500">Diviser tous les N pages</p>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors duration-300">
                                <input type="radio" name="split_mode" value="all" class="mr-3">
                                <div>
                                    <p class="font-medium text-gray-800">Toutes les pages</p>
                                    <p class="text-sm text-gray-500">Une page par fichier</p>
                                </div>
                            </label>
                        </div>
                        
                        <div id="pagesInput" class="mt-4">
                            <label class="block text-gray-700 font-medium mb-2">Plages de pages</label>
                            <input type="text" name="pages" placeholder="1-3, 5-7, 9" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        
                        <div id="fixedInput" class="mt-4 hidden">
                            <label class="block text-gray-700 font-medium mb-2">Nombre de pages par fichier</label>
                            <input type="number" name="pages_per_file" min="1" value="1" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-hover w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors duration-300 flex items-center justify-center">
                        <i class="fas fa-cut mr-2"></i>
                        Diviser le PDF
                    </button>
                </form>
            </div>
        </div>
        
        <!-- Info sidebar -->
        <div class="lg:col-span-1">
            <div class="bg-blue-50 rounded-lg p-6 fade-in-element" style="opacity: 0;">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-info-circle text-blue-600 mr-2"></i>
                    Comment ça marche ?
                </h3>
                <ol class="space-y-3 text-sm text-gray-700">
                    <li class="flex items-start">
                        <span class="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 flex-shrink-0">1</span>
                        <span>Téléchargez votre fichier PDF</span>
                    </li>
                    <li class="flex items-start">
                        <span class="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 flex-shrink-0">2</span>
                        <span>Choisissez le mode de division</span>
                    </li>
                    <li class="flex items-start">
                        <span class="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 flex-shrink-0">3</span>
                        <span>Cliquez sur "Diviser"</span>
                    </li>
                    <li class="flex items-start">
                        <span class="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 flex-shrink-0">4</span>
                        <span>Téléchargez vos fichiers</span>
                    </li>
                </ol>
            </div>
            
            <div class="bg-green-50 rounded-lg p-6 mt-6 fade-in-element" style="opacity: 0;">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-shield-alt text-green-600 mr-2"></i>
                    Sécurité
                </h3>
                <ul class="space-y-2 text-sm text-gray-700">
                    <li class="flex items-start">
                        <i class="fas fa-check text-green-600 mr-2 mt-1"></i>
                        <span>Vos fichiers sont supprimés après traitement</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-check text-green-600 mr-2 mt-1"></i>
                        <span>Connexion sécurisée SSL</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-check text-green-600 mr-2 mt-1"></i>
                        <span>100% gratuit et sans inscription</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const splitModeRadios = document.querySelectorAll('input[name="split_mode"]');
    const pagesInput = document.getElementById('pagesInput');
    const fixedInput = document.getElementById('fixedInput');
    
    splitModeRadios.forEach(radio => {
        radio.addEventListener('change', function() {
            if (this.value === 'pages') {
                pagesInput.classList.remove('hidden');
                fixedInput.classList.add('hidden');
            } else if (this.value === 'fixed') {
                pagesInput.classList.add('hidden');
                fixedInput.classList.remove('hidden');
            } else {
                pagesInput.classList.add('hidden');
                fixedInput.classList.add('hidden');
            }
        });
    });
});
</script>
{% endblock %}
